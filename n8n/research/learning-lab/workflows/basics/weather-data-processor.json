{
  "name": "Weather Data Processor",
  "nodes": [
    {
      "parameters": {},
      "id": "start-node",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "url": "https://api.open-meteo.com/v1/forecast",
        "method": "GET",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "latitude",
              "value": "39.9042"
            },
            {
              "name": "longitude",
              "value": "116.4074"
            },
            {
              "name": "current",
              "value": "temperature_2m,relative_humidity_2m,wind_speed_10m"
            },
            {
              "name": "timezone",
              "value": "Asia/Shanghai"
            }
          ]
        },
        "options": {}
      },
      "id": "fetch-weather",
      "name": "Fetch Beijing Weather",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        460,
        300
      ],
      "notes": "è·å–åŒ—äº¬å®æ—¶å¤©æ°”æ•°æ®\nä½¿ç”¨å…è´¹çš„Open-Meteo API"
    },
    {
      "parameters": {
        "functionCode": "// å¤„ç†å¤©æ°”æ•°æ®\nconst data = $input.item.json;\n\n// æå–å½“å‰å¤©æ°”ä¿¡æ¯\nconst current = data.current || {};\nconst temperature = current.temperature_2m;\nconst humidity = current.relative_humidity_2m;\nconst windSpeed = current.wind_speed_10m;\n\n// åˆ¤æ–­æ¸©åº¦çº§åˆ«\nlet tempLevel = '';\nif (temperature < 0) {\n  tempLevel = 'æå†· ğŸ¥¶';\n} else if (temperature < 10) {\n  tempLevel = 'å¯’å†· â„ï¸';\n} else if (temperature < 20) {\n  tempLevel = 'å‡‰çˆ½ ğŸƒ';\n} else if (temperature < 30) {\n  tempLevel = 'èˆ’é€‚ â˜€ï¸';\n} else {\n  tempLevel = 'ç‚çƒ­ ğŸ”¥';\n}\n\n// åˆ¤æ–­é£é€Ÿçº§åˆ«\nlet windLevel = '';\nif (windSpeed < 5) {\n  windLevel = 'å¾®é£';\n} else if (windSpeed < 15) {\n  windLevel = 'ä¸­ç­‰é£é€Ÿ';\n} else {\n  windLevel = 'å¤§é£';\n}\n\n// ç”Ÿæˆå¤©æ°”æŠ¥å‘Š\nconst weatherReport = {\n  location: 'åŒ—äº¬',\n  timestamp: data.current.time,\n  temperature: {\n    value: temperature,\n    unit: 'Â°C',\n    level: tempLevel\n  },\n  humidity: {\n    value: humidity,\n    unit: '%'\n  },\n  wind: {\n    speed: windSpeed,\n    unit: 'km/h',\n    level: windLevel\n  },\n  summary: `${tempLevel} | æ¸©åº¦ ${temperature}Â°C | æ¹¿åº¦ ${humidity}% | é£é€Ÿ ${windSpeed} km/h (${windLevel})`,\n  isComfortable: temperature >= 15 && temperature <= 25 && humidity < 70,\n  updatedAt: new Date().toISOString()\n};\n\nreturn { json: weatherReport };"
      },
      "id": "process-data",
      "name": "Process Weather Data",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        680,
        300
      ],
      "notes": "å¤„ç†å¤©æ°”æ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json.isComfortable}}",
              "value2": true
            }
          ]
        }
      },
      "id": "check-comfortable",
      "name": "Is Weather Comfortable?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        900,
        300
      ],
      "notes": "åˆ¤æ–­å¤©æ°”æ˜¯å¦èˆ’é€‚"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "message",
              "value": "=âœ… å¤©æ°”èˆ’é€‚ï¼\n\nğŸ“ ä½ç½®ï¼š{{$json.location}}\nğŸŒ¡ï¸ æ¸©åº¦ï¼š{{$json.temperature.value}}{{$json.temperature.unit}} {{$json.temperature.level}}\nğŸ’§ æ¹¿åº¦ï¼š{{$json.humidity.value}}{{$json.humidity.unit}}\nğŸ’¨ é£é€Ÿï¼š{{$json.wind.speed}} {{$json.wind.unit}} ({{$json.wind.level}})\n\nä»Šå¤©æ˜¯å‡ºé—¨çš„å¥½æ—¥å­ï¼â˜€ï¸"
            },
            {
              "name": "status",
              "value": "comfortable"
            }
          ]
        },
        "options": {}
      },
      "id": "comfortable-message",
      "name": "Comfortable Weather Message",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1120,
        200
      ]
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "message",
              "value": "=âš ï¸ å¤©æ°”ä¸å¤ªèˆ’é€‚\n\nğŸ“ ä½ç½®ï¼š{{$json.location}}\nğŸŒ¡ï¸ æ¸©åº¦ï¼š{{$json.temperature.value}}{{$json.temperature.unit}} {{$json.temperature.level}}\nğŸ’§ æ¹¿åº¦ï¼š{{$json.humidity.value}}{{$json.humidity.unit}}\nğŸ’¨ é£é€Ÿï¼š{{$json.wind.speed}} {{$json.wind.unit}} ({{$json.wind.level}})\n\nå»ºè®®æ³¨æ„é˜²æŠ¤ï¼"
            },
            {
              "name": "status",
              "value": "uncomfortable"
            }
          ]
        },
        "options": {}
      },
      "id": "uncomfortable-message",
      "name": "Uncomfortable Weather Message",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.2,
      "position": [
        1120,
        400
      ]
    },
    {
      "parameters": {
        "mode": "mergeByPosition"
      },
      "id": "merge-results",
      "name": "Merge Results",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        1340,
        300
      ]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [
        [
          {
            "node": "Fetch Beijing Weather",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fetch Beijing Weather": {
      "main": [
        [
          {
            "node": "Process Weather Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Weather Data": {
      "main": [
        [
          {
            "node": "Is Weather Comfortable?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Weather Comfortable?": {
      "main": [
        [
          {
            "node": "Comfortable Weather Message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Uncomfortable Weather Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Comfortable Weather Message": {
      "main": [
        [
          {
            "node": "Merge Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Uncomfortable Weather Message": {
      "main": [
        [
          {
            "node": "Merge Results",
            "type": "main",
            "index": 1
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "name": "tutorial",
      "id": "1"
    },
    {
      "name": "beginner",
      "id": "2"
    },
    {
      "name": "api",
      "id": "3"
    }
  ],
  "meta": {
    "instanceId": "learning-project"
  },
  "id": "weather-data-processor",
  "versionId": "1.0.0",
  "notes": "ğŸŒ¤ï¸ å¤©æ°”æ•°æ®å¤„ç†å·¥ä½œæµ\n\nè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å·¥ä½œæµï¼Œå±•ç¤ºäº†ä»¥ä¸‹æ¦‚å¿µï¼š\n\nâœ¨ åŠŸèƒ½ï¼š\n1. è°ƒç”¨å…è´¹å¤©æ°”APIè·å–åŒ—äº¬å®æ—¶å¤©æ°”\n2. å¤„ç†å’Œåˆ†æå¤©æ°”æ•°æ®\n3. æ ¹æ®æ¸©åº¦å’Œæ¹¿åº¦åˆ¤æ–­æ˜¯å¦èˆ’é€‚\n4. ç”Ÿæˆä¸åŒçš„å¤©æ°”æŠ¥å‘Š\n\nğŸ“š å­¦ä¹ è¦ç‚¹ï¼š\n1. Manual Trigger - æ‰‹åŠ¨è§¦å‘\n2. HTTP Request - è°ƒç”¨å¤–éƒ¨API\n3. FunctionèŠ‚ç‚¹ - æ•°æ®å¤„ç†å’Œé€»è¾‘\n4. IFèŠ‚ç‚¹ - æ¡ä»¶åˆ¤æ–­\n5. SetèŠ‚ç‚¹ - è®¾ç½®è¾“å‡ºæ•°æ®\n6. MergeèŠ‚ç‚¹ - åˆå¹¶åˆ†æ”¯ç»“æœ\n\nğŸš€ ä½¿ç”¨æ–¹æ³•ï¼š\n1. ç‚¹å‡»å·¦ä¸Šè§’ 'Execute Workflow' æŒ‰é’®\n2. æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºæ•°æ®\n3. å°è¯•ä¿®æ”¹æ¸©åº¦é˜ˆå€¼\n4. æ›´æ”¹åŸå¸‚åæ ‡è·å–ä¸åŒåœ°åŒºå¤©æ°”\n\nğŸ’¡ æ‰©å±•å»ºè®®ï¼š\n- æ·»åŠ æ›´å¤šåŸå¸‚\n- ä¿å­˜å†å²æ•°æ®åˆ°æ•°æ®åº“\n- å‘é€é€šçŸ¥åˆ°Telegram\n- åˆ›å»ºå®šæ—¶ä»»åŠ¡æ¯å¤©è·å–å¤©æ°”\n\nğŸŒ APIæ¥æºï¼šOpen-Meteo (å…è´¹ï¼Œæ— éœ€APIå¯†é’¥)\nhttps://open-meteo.com/"
}
