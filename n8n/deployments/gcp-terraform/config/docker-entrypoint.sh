#!/bin/sh
# ============================================
# n8n Docker 容器入口脚本
# 确保必要的目录存在并设置正确的权限
# ============================================

set -e

echo "=========================================="
echo "启动 n8n 容器..."
echo "=========================================="

# 确保数据目录存在
mkdir -p /data /home/node/.n8n

# 确保 node 用户拥有这些目录
chown -R node:node /data /home/node/.n8n

echo "✓ 目录权限已设置"
echo "✓ 启动 n8n 服务..."
echo "=========================================="

# 执行 n8n 命令（传递所有参数）
exec n8n "$@"
